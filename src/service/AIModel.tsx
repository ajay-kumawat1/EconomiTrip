import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash-exp",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "text/plain",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON formate.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'Okay, here\'s a JSON format travel plan for a couple visiting Las Vegas on a budget for 3 days. This includes hotel options and a daily itinerary. Note that pricing and availability can fluctuate, so these are estimates. I will generate images using placeholders since I can\'t generate actual URLs.\n\n```json\n{\n  "location": "Las Vegas, Nevada",\n  "budget": "Cheap",\n  "duration": "3 Days",\n  "travelers": "Couple",\n  "hotels": [\n    {\n      "hotelName": "Circus Circus Hotel & Casino",\n      "hotelAddress": "2880 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "price": 40,\n      "hotelImageURL": "https://via.placeholder.com/300x200?text=Circus+Circus",\n      "geoCoordinates": {\n        "latitude": 36.1345,\n        "longitude": -115.1677\n      },\n      "rating": 3.8,\n       "description": "Family-friendly hotel with affordable rooms, a casino, and the Adventuredome theme park."\n    },\n    {\n      "hotelName": "Strat Hotel, Casino & SkyPod",\n      "hotelAddress": "2000 S Las Vegas Blvd, Las Vegas, NV 89104",\n      "price": 45,\n      "hotelImageURL": "https://via.placeholder.com/300x200?text=Strat+Hotel",\n      "geoCoordinates": {\n        "latitude": 36.1460,\n        "longitude": -115.1530\n       },\n      "rating": 4.0,\n      "description": "Offers great views of the Strip, has a pool, and is close to many attractions."\n    },\n     {\n      "hotelName": "OYO Hotel & Casino Las Vegas",\n      "hotelAddress": "115 E Tropicana Ave, Las Vegas, NV 89109",\n      "price": 48,\n      "hotelImageURL": "https://via.placeholder.com/300x200?text=OYO+Hotel",\n      "geoCoordinates": {\n         "latitude": 36.0994,\n         "longitude": -115.1682\n        },\n      "rating": 3.7,\n      "description": "A budget-friendly option located near the south end of the Strip."\n    }\n\n  ],\n  "itinerary": {\n    "day1": {\n      "theme": "Exploring the Strip & Free Attractions",\n      "bestTimeToVisit": "Morning to late afternoon",\n       "places": [\n        {\n          "placeName": "Bellagio Conservatory & Botanical Gardens",\n          "placeDetails": "A stunning display of floral arrangements and decorations that change seasonally.",\n          "placeImageURL": "https://via.placeholder.com/300x200?text=Bellagio+Gardens",\n          "geoCoordinates": {\n            "latitude": 36.1126,\n            "longitude": -115.1745\n          },\n          "ticketPricing": "Free",\n          "rating": 4.8,\n           "travelTime": "0 - 10 minutes (walking from nearby hotels)"\n        },\n         {\n          "placeName": "Fountains of Bellagio",\n          "placeDetails": "A mesmerizing water show choreographed to music and lights.",\n          "placeImageURL": "https://via.placeholder.com/300x200?text=Bellagio+Fountains",\n          "geoCoordinates": {\n             "latitude": 36.1119,\n             "longitude": -115.1744\n            },\n          "ticketPricing": "Free",\n          "rating": 4.9,\n           "travelTime": "Adjacent to the gardens, 0 minutes"\n         },\n         {\n          "placeName": "The LINQ Promenade",\n          "placeDetails": "A vibrant outdoor shopping, dining, and entertainment district.",\n          "placeImageURL": "https://via.placeholder.com/300x200?text=LINQ+Promenade",\n          "geoCoordinates": {\n            "latitude": 36.1169,\n            "longitude": -115.1702\n             },\n          "ticketPricing": "Free to explore (costs for activities/dining)",\n          "rating": 4.5,\n          "travelTime": "5-15 minutes walking from Bellagio"\n        },\n        {\n          "placeName": "Volcano at the Mirage",\n          "placeDetails":"Watch the volcano erupt with fire and smoke effects set to music.",\n           "placeImageURL": "https://via.placeholder.com/300x200?text=Mirage+Volcano",\n          "geoCoordinates": {\n            "latitude": 36.1201,\n             "longitude": -115.1743\n          },\n           "ticketPricing": "Free",\n           "rating": 4.6,\n           "travelTime": "5-10 minutes walk from The LINQ Promenade"\n          }\n\n       ]\n    },\n    "day2": {\n      "theme": "Downtown & Unique Experiences",\n      "bestTimeToVisit": "Afternoon and Evening",\n      "places": [\n        {\n           "placeName": "Fremont Street Experience",\n           "placeDetails": "A pedestrian mall featuring a massive LED canopy with light shows, street performers, and music.",\n          "placeImageURL":"https://via.placeholder.com/300x200?text=Fremont+Street",\n          "geoCoordinates": {\n            "latitude": 36.1699,\n            "longitude": -115.1410\n            },\n           "ticketPricing":"Free to enter, cost for shows and zip lines",\n           "rating": 4.7,\n          "travelTime": "15-20 minutes drive/ride share from the strip"\n          },\n          {\n            "placeName": "Container Park",\n           "placeDetails": "An open-air shopping and entertainment complex made from shipping containers, great for unique photos",\n            "placeImageURL": "https://via.placeholder.com/300x200?text=Container+Park",\n             "geoCoordinates": {\n                "latitude": 36.1704,\n                 "longitude": -115.1377\n                },\n            "ticketPricing": "Free to enter, costs for shops and food",\n            "rating": 4.4,\n             "travelTime": "2-5 minutes walk from Fremont Street Experience"\n           },\n         {\n          "placeName": "Gold and Silver Pawn Shop",\n          "placeDetails":"Reality TV fans might know this one - from the History Channel\'s Pawn Stars.",\n           "placeImageURL": "https://via.placeholder.com/300x200?text=Pawn+Shop",\n          "geoCoordinates": {\n             "latitude": 36.1710,\n            "longitude": -115.1433\n           },\n            "ticketPricing": "Free to enter",\n           "rating": 4.2,\n           "travelTime": "5-10 minutes walking distance from the container park"\n\n         }\n\n      ]\n    },\n    "day3": {\n      "theme": "South Strip & Departure",\n      "bestTimeToVisit": "Morning to Noon",\n      "places":[\n      {\n         "placeName":"Welcome to Las Vegas Sign",\n         "placeDetails":"A must-see iconic photo opportunity.",\n          "placeImageURL": "https://via.placeholder.com/300x200?text=Las+Vegas+Sign",\n          "geoCoordinates": {\n            "latitude": 36.0828,\n             "longitude": -115.1728\n             },\n          "ticketPricing":"Free",\n          "rating": 4.6,\n        "travelTime": "10 -15 minutes drive from downtown"\n         },\n        {\n          "placeName": "M&M\'s World",\n          "placeDetails": "A four-story retail store with M&M\'s merchandise, including fun photo ops.",\n          "placeImageURL": "https://via.placeholder.com/300x200?text=M&Ms+World",\n          "geoCoordinates": {\n            "latitude": 36.1074,\n            "longitude": -115.1713\n          },\n          "ticketPricing": "Free to enter, cost for merchandise",\n          "rating": 4.3,\n          "travelTime":"5-10 Minutes drive from the welcome to las vegas sign."\n         },\n          {\n           "placeName": "Depart from Las Vegas",\n           "placeDetails": "Head to the airport for your departure",\n           "placeImageURL": "https://via.placeholder.com/300x200?text=Airport",\n             "geoCoordinates": {\n              "latitude": 36.0801,\n              "longitude": -115.1523\n               },\n            "ticketPricing": "Transportation Cost",\n             "rating": 4.5,\n             "travelTime": "10- 15 minutes drive/ride share from M&M world"\n\n           }\n        ]\n    }\n  }\n}\n```\n\n**Important Notes:**\n\n*   **Prices:** Hotel and ticket prices are estimates and can vary based on the season and booking time.\n*   **Transportation:** Walking is good on the strip. Use ride-sharing or the public bus system for getting to Downtown and the south end of the strip.\n*   **Food:** Eating at the hotels can be expensive. Look for budget-friendly meals at the LINQ promenade, off the strip or in downtown.\n\nThis is a flexible plan; feel free to adjust it based on your interests and energy levels! Have a great trip to Las Vegas!\n',
        },
      ],
    },
  ],
});
